/*
 * motors.h
 *
 *  Created on: Sep 11, 2020
 *      Author: Kyle Rodrigues
 */

#ifndef INC_MOTORS_H_
#define INC_MOTORS_H_

#include <stdint.h> //standard intriguer
#include "app_main.h"
#include "tim.h"

#define MAX_SPEED 10.0  //rad/s

//#define MAX_VELOCITY 50.0
#define SPEED_CHANGE 5.0

float speed_l = 0.0;
float speed_r = 0.0;

float duty_l = 0.0;
float duty_r = 0.0;

static const MOTOR_CONF mot_left = {"Left",TIM_CHANNEL_1, &htim4, ROMI_DIRL_GPIO_Port, ROMI_DIRL_Pin}; //add a status bit?
static const MOTOR_CONF mot_right = {"Right",TIM_CHANNEL_3, &htim2, ROMI_DIRR_GPIO_Port, ROMI_DIRR_Pin};

//******Motor Setup****
typedef struct MOTOR_T {
	char *motor;
	uint32_t tim_ch;
	TIM_HandleTypeDef *htim;
	GPIO_TypeDef* gpio_port;
	uint32_t gpio_pin;

}MOTOR_CONF;


#endif /* INC_MOTORS_H_ */
